
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:itsnat="http://itsnat.org/itsnat" xmlns="http://www.w3.org/1999/xhtml" >
<head>
</head>
<body>

    <div itsnat:nocache="true" >

        <h5 id="warningId" style="display:none;">Only works with W3C based browsers with mutation events</h5>

        <span id="mutationPanelId">
            <a href="javascript:void(0)"  onclick="AddAttr(event)">Add a new attribute on client (set style with red color)</a>
            <br /><br />

            <a href="javascript:void(0)"  onclick="UpdateAttr(event)" style="color:blue;" >Update an attribute on client (set style with red color)</a>
            <br /><br />

            <a href="javascript:void(0)"  onclick="RemoveAttr(event)" style="color:red;" >Update an attribute on client (remove style with red color)</a>
            <br /><br />

            <a href="javascript:void(0)"  onclick="AddNewNode(event)" >Add a new node: </a>
            <br /><br />

            <a href="javascript:void(0)"  onclick="RemoveNode(event)" >Remove node</a>
            <br /><br />

            <a href="javascript:void(0)"  onclick="ChangeText(event)" >Change text node</a>
            <br />
        </span>

    </div>

    <br />

    <itsnat:include name="feashow.util.log" />

    <script type="text/javascript">
    if (isMSIEOld()) // MSIE
    {
        document.getElementById("warningId").removeAttribute("style");
        document.getElementById("mutationPanelId").style.display = "none";
    }

    function AddAttr(evt)
    {
        if (!evt.target.hasAttribute("style"))
            evt.target.setAttribute("style","color:red;");
    }
    function UpdateAttr(evt)
    {
        var newValue = "color: red;";
        if (evt.target.getAttribute("style") != newValue)
            evt.target.setAttribute("style",newValue);
    }
    function RemoveAttr(evt)
    {
        if (evt.target.hasAttribute("style"))
            evt.target.removeAttribute("style");
    }
    function AddNewNode(evt)
    {
        if (evt.target.childNodes.length <= 1)
        {
            var newElem = document.createTextNode("New node ");
            evt.target.appendChild(newElem);
        }
    }
    function RemoveNode(evt)
    {
        evt.target.parentNode.removeChild(evt.target);
    }
    function ChangeText(evt)
    {
        var newValue = "Text node changed";
        if (newValue != evt.target.firstChild.data)
            evt.target.firstChild.data = "Text node changed";
    }
</script>

</body>
</html>
