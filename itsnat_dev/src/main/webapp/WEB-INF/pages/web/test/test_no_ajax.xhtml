
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test No AJAX</title>
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />
</head>
<body style="margin:20px;">

    <h2>Test No AJAX</h2>

    <p>Shift/Ctrl buttons can be used to select/unselect</p>
    <form id="formPruebaId" name="form" action="" method="get" onsubmit="setSelected(this)" >
        <select id="listId" name="list" multiple="multiple" size="5" style="width:200px;" onchange="submitSelection(this)"></select>
        <input type="submit" value="Remove Selected Interval" onclick="setAction(this,'remove')" />
        <br /><br />
        <input id="itemId" name="item" type="text" size="15" value="" />
        Pos: <input id="posId" name="pos" type="text" value="" size="4" />
        <input type="submit" value="Update" onclick="setAction(this,'update')" />
        <input type="submit" value="Insert" onclick="setAction(this,'insert')" />

        <input type="hidden" name="itsnat_doc_name" value="test_no_ajax" />
        <input type="hidden" name="action" value="" />
        <input type="hidden" name="selected" value="" />
    </form>

    <script type="text/javascript">
        function setAction(elem,value)
        {
            elem.form.elements['action'].value = value;
        }

        function setSelected(form)
        {
            var options = form.elements['list'].options;
            var selected = "";
            for(var i = 0; i < options.length; i++)
            {
                if (options[i].selected)
                {
                    if (selected != "") selected += ',';
                    selected += i;
                }
            }
            form.elements['selected'].value = selected;
            return true;
        }

        function submitSelection(elem)
        {
            setAction(elem,"selection");
            var form = elem.form;
            setSelected(form);
            form.submit(); // onsubmit is not called (is called using UI)
        }
    </script>

    <a href="index.html">Return to Menu</a>
</body>
</html>
