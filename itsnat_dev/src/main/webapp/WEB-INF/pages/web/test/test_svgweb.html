<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!--
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

-->

<html>
<head xmlns:itsnat="http://itsnat.org/itsnat">
    <title>SVGWeb Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="svg.render.forceflash" content="true" />
    <script src="svgweb/svg.js" data-path="svgweb"></script>
</head>
<body itsnat:nocache="true" xmlns:itsnat="http://itsnat.org/itsnat">


    <h1>SVGWeb Test!</h1>

    <p>
        <a href="javascript:void(0);" onclick="reloadWithForceFlash(false);">Test with forceflash to FALSE</a>&nbsp;
        <a href="javascript:void(0);" onclick="reloadWithForceFlash(true);">to TRUE</a> (test only useful in W3C browsers)
    </p>
    <p>Note: In MSIE activate the Flash control (one click) if needed</p>


<span id="svgContainerId">

    <svg id="svgId" xmlns="http://www.w3.org/2000/svg" itsnat:svgengine="svgweb" xmlns:itsnat="http://itsnat.org/itsnat"
             version="1.1" baseProfile="full" width="350px" height="200px" style="border: red 1px solid">
        <g id="circleListId"  >
            <circle id="circleId" cx="50" cy="50" r="50" fill="#ff0000" stroke="#000000" stroke-width="2px"/>
        </g><!-- Comentario para fastidiar  -->
        <g><!-- style tiene valores no deseados que se cambiarÃ¡n -->
            <text id="textId" x="150" y="150" style="fill:yellow; font-size:100px;"><!-- Comentario
            para fastidiar -->(TO BE CHANGED)</text>
        </g>

    </svg>
    <div id="svgReferenceId" style="display:none">Para ver si funciona bien el insertBefore al reinsertar</div>
</span>

<span id="svgContainerReferenceId" />

<br /><br />
<a id="addCircleId" href="javascript:;">Add Circle</a>&nbsp;
<a id="removeCircleId" href="javascript:;">Remove Circle</a>
<br />
<a id="biggerCircleId" href="javascript:;">Bigger Selected Circle</a>&nbsp;
<a id="smallerCircleId" href="javascript:;">Smaller Selected Circle</a>
<br />
<a id="addRemoveTextId" href="javascript:;">Add/Remove Text</a>&nbsp;
<a id="changeTextId" href="javascript:;">Change Text (click twice)</a>
<br />
<a id="testSubTreeInsertionId" href="javascript:;">Test Subtree Re-Insertion</a>&nbsp;

<br /><br />
<a id="removeOrReinsertId" href="javascript:;">Eliminar</a>&nbsp; <input id="useSVGLoadId" type="checkbox" /> Use SVGLoad listener
<br />
<a id="reinsertId" href="javascript:;">Remove and Insert</a>

<p>Note: in GAE use SVGLoad mode, automatic handling does not work.</p>
<br /><br />
<a href="javascript:window.location.href=window.location.href">RELOAD</a>

    <br /><br />
    <a href="${servletURL}?itsnat_action=attach_client&itsnat_refresh_method=timer&itsnat_session_id=${sessionId}&itsnat_doc_id=${docId}&itsnat_refresh_interval=1000&itsnat_comm_mode=${commModeRemCtrl}&itsnat_event_timeout=${eventTimeout}&itsnat_wait_doc_timeout=${waitDocTimeout}" target="_blank">Remote Control Timer</a> &nbsp;
    <a href="${servletURL}?itsnat_action=attach_client&itsnat_refresh_method=timer&itsnat_session_id=${sessionId}&itsnat_doc_id=${docId}&itsnat_refresh_interval=1000&itsnat_comm_mode=${commModeRemCtrl}&itsnat_event_timeout=${eventTimeout}&itsnat_wait_doc_timeout=${waitDocTimeout}&itsnat_read_only=false" target="_blank">Full Control</a>
    <br />
    <a href="${servletURL}?itsnat_action=attach_client&itsnat_refresh_method=comet&itsnat_session_id=${sessionId}&itsnat_doc_id=${docId}&itsnat_comm_mode=${commModeRemCtrl}&itsnat_event_timeout=${eventTimeout}&itsnat_wait_doc_timeout=${waitDocTimeout}" target="_blank">Remote Control Comet</a> &nbsp;
    <a href="${servletURL}?itsnat_action=attach_client&itsnat_refresh_method=comet&itsnat_session_id=${sessionId}&itsnat_doc_id=${docId}&itsnat_comm_mode=${commModeRemCtrl}&itsnat_event_timeout=${eventTimeout}&itsnat_wait_doc_timeout=${waitDocTimeout}&itsnat_read_only=false" target="_blank">Full Control</a>
    <br />
    <a href="${servletURL}?itsnat_action=attach_client&itsnat_refresh_method=none&itsnat_session_id=${sessionId}&itsnat_doc_id=${docId}&itsnat_comm_mode=${commModeRemCtrl}&itsnat_event_timeout=${eventTimeout}&itsnat_wait_doc_timeout=${waitDocTimeout}" target="_blank">Remote Control No Refresh</a> &nbsp;
    <a href="${servletURL}?itsnat_action=attach_client&itsnat_refresh_method=none&itsnat_session_id=${sessionId}&itsnat_doc_id=${docId}&itsnat_comm_mode=${commModeRemCtrl}&itsnat_event_timeout=${eventTimeout}&itsnat_wait_doc_timeout=${waitDocTimeout}&itsnat_read_only=false" target="_blank">Full Control</a>
    <br />
    <a href="index.html">Return</a>
    <br /><br />

    <script>
    function reloadWithForceFlash(value)
    {
        var url = window.location.href;
        var begin = url.indexOf('svg.render.forceflash');
        if (begin == -1)
        {
            url = url + "&svg.render.forceflash=" + value;
        }
        else
        {
            var end;
            begin = url.indexOf('svg.render.forceflash=true');
            if (begin != -1)
            {
                end = begin + 'svg.render.forceflash=true'.length;
            }
            else
            {
                begin = url.indexOf('svg.render.forceflash=false');
                end = begin + 'svg.render.forceflash=false'.length;
            }
            url = url.substring(0,begin) + "svg.render.forceflash=" + value + url.substring(end);
        }
        window.location.href = url;
    }
    </script>



    <script>
    function mostrar(object)
    {
        var str = "";
        for(var name in object)
        {
            if (name.indexOf("on") == 0) continue;
            if (name == "innerHTML") continue;
            if (name == "outerHTML") continue;
            str += " " + name /* + "-" + object[name] */;
        }
        alert(str);
    }


    function wait(cond,callback)
    {
        var func = function()
        {
            var cond = arguments.callee.cond;
            var callback = arguments.callee.callback;
            if (!cond()) window.setTimeout(arguments.callee,0);
            else callback();
        };
        func.cond = cond;
        func.callback = callback;
        func();
    }

    function test()
    {
        var node = document.getElementById("svgContainerId");
        var embed = node.firstChild;
        while(embed.nodeType != 1) embed = embed.nextSibling;

        //alert(embed.tagName);

        var func = function() { alert("LOAD"); };
        embed.addEventListener("load",func,false);
    }

//test();

    </script>
<!--
    <button onclick="test()">PRUEBA</button>
-->

</body>
</html>

